!function(v,m){v.fn.yith_wcbk_people_selector=function(t){var o=this,l=v(this),n=!1,a="",e=!1,s={main:!1,open:!1,close:!1,toggle:!1,widget:v(".yith_wcbk_booking_product_form_widget")},i=function(){m.addEventListener("click",g,!0);var e=l.attr("id"),e=!!e&&v('label[for="'+e+'"]');l.on("open",u),l.on("close",f),n.on("change",d),e&&e.length&&e.on("click",function(){s.toggle.trigger("click")})},c=function(){var e=l.data("min"),n=l.data("max");o.min=void 0!==e&&parseInt(e,10),o.max=void 0!==n&&parseInt(n,10)},r=function(){a=l.find(t.totals_selector)||"",e=l.find(t.fieldsContainer_selector)||"",n=l.find(t.field_selector)||!1,s.main=l.find("."+t["class"]),s.open=l.find(t.openHandler_selector),s.close=l.find(t.closeHandler_selector),s.toggle=l.find(t.toggleHandler_selector),_(),n&&n.each(function(){v(this).yith_wcbk_people_selector_field({canIncreaseGlobal:function(){return!1===o.max||o.value<o.max},onUpdate:function(){n.trigger("enableDisableButtons")}})})},p=function(){return!!l.hasClass(t.opened_class)},_=function(){var e=0;n&&n.each(function(){e+=parseInt(v(this).yith_wcbk_people_selector_field("getValue"))}),o.value=e},d=function(e){var n,e=e||!0;_(),n=1<o.value?t.plural_label.replace("%s",o.value.toString()):1===o.value?t.singular_label:t.zero_label,a.text(n),e&&l.trigger("change")},u=function(){l.removeClass(t.closed_class).addClass(t.opened_class),e&&e.show(),t.onOpen()},f=function(){l.removeClass(t.opened_class).addClass(t.closed_class),e&&e.hide(),t.onClose()},b=function(e){"object"==typeof e&&"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),(p()?f:u)()},g=function(e){s.close.length&&s.close.get(0).contains(e.target)?f():s.open.length&&s.open.get(0).contains(e.target)?u():s.toggle.length&&s.toggle.get(0).contains(e.target)?b():l.get(0).contains(e.target)||f()},h={zero_label:yith_people_selector_params.i18n_zero_person,singular_label:yith_people_selector_params.i18n_one_person,plural_label:yith_people_selector_params.i18n_more_persons,"class":"yith-wcbk-people-selector",totals_selector:".yith-wcbk-people-selector__totals",closeHandler_selector:".yith-wcbk-people-selector__close-handler",openHandler_selector:".yith-wcbk-people-selector__open-handler",toggleHandler_selector:".yith-wcbk-people-selector__toggle-handler",fieldsContainer_selector:".yith-wcbk-people-selector__fields-container",field_selector:".yith-wcbk-people-selector__field",opened_class:"yith-wcbk-people-selector--opened",closed_class:"yith-wcbk-people-selector--closed",onOpen:function(){},onClose:function(){}};return t=v.extend({},h,t),o.val=function(){return o.value},o.value=0,c(),r(),i(),d(!1),f(),l},v.fn.yith_wcbk_people_selector_field=function(e){var t=this,o=v(this),l=!1,a=!1,n=!1,s=!1,i=function(){l=o.find(t.options.value_selector)||!1,a=o.find(t.options.total_selector)||!1,n=o.find(t.options.plus_selector)||!1,s=o.find(t.options.minus_selector)||!1},c=function(){o.on("click",t.options.plus_selector,function(){t.canIncrease()&&f()}),o.on("click",t.options.minus_selector,function(){t.canDecrease()&&u()}),o.on("enableDisableButtons",t.enableDisableButtons)},r=function(){var e=o.data("min"),n=o.data("max");t.min=void 0!==e&&parseInt(e),t.max=void 0!==n&&parseInt(n)},p=function(e){var e=void 0===e||e,n=d();a&&a.text(n),l&&l.val(n),e&&l.trigger("change"),t.enableDisableButtons(),t.options.onUpdate()},_=function(e,n){l&&void 0!==e&&(e=e,!1!==t.min&&(e=Math.max(t.min,parseInt(e))),!1!==t.max&&(e=Math.min(t.max,parseInt(e))),e=parseInt(e),l.val(e),o.data("value",e),p(n))},d=function(){var e=0;return l&&(e=l.val()||0),parseInt(e)},u=function(e){var e=void 0===e||isNaN(e)?1:parseInt(e),n=d(),e=parseInt(e);_(n-e)},f=function(e){var e=void 0===e||isNaN(e)?1:parseInt(e),n=d(),e=parseInt(e);_(n+e)},b={value_selector:".yith-wcbk-people-selector__field__value",total_selector:".yith-wcbk-people-selector__field__total",plus_selector:".yith-wcbk-people-selector__field__plus",minus_selector:".yith-wcbk-people-selector__field__minus",buttonDisabledClass:"yith-wcbk-people-selector__field__button--disabled",canIncreaseGlobal:function(){return!0},canDecreaseGlobal:function(){return!0},onUpdate:function(){}};return t.canIncrease=function(){var e=!0;return(e=!1!==t.max?d()<t.max:e)&&t.options.canIncreaseGlobal()},t.canDecrease=function(){var e=!0;return(e=!1!==t.min?d()>t.min:e)&&t.options.canDecreaseGlobal()},t.enableDisableButtons=function(){t.canIncrease()?n.removeClass(t.options.buttonDisabledClass):n.addClass(t.options.buttonDisabledClass),t.canDecrease()?s.removeClass(t.options.buttonDisabledClass):s.addClass(t.options.buttonDisabledClass)},"getValue"===(e=void 0!==e?e:{})?o.data("value")||0:(t.options=v.extend({},b,e),r(),i(),c(),_(d(),!1),o)}}(jQuery,(window,document));